<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Dual Labeled Counters - Glean SDKs - Cross-platform Telemetry Libraries</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../../shared/glean.css">
        <link rel="stylesheet" href="../../../shared/mermaid.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../../index.html">Glean</a></li><li class="chapter-item affix "><li class="part-title">User Guides</li><li class="chapter-item "><a href="../../user/adding-glean-to-your-project/index.html"><strong aria-hidden="true">1.</strong> Adding Glean to your project</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../user/adding-glean-to-your-project/kotlin.html"><strong aria-hidden="true">1.1.</strong> Kotlin</a></li><li class="chapter-item "><a href="../../user/adding-glean-to-your-project/swift.html"><strong aria-hidden="true">1.2.</strong> Swift</a></li><li class="chapter-item "><a href="../../user/adding-glean-to-your-project/python.html"><strong aria-hidden="true">1.3.</strong> Python</a></li><li class="chapter-item "><a href="../../user/adding-glean-to-your-project/rust.html"><strong aria-hidden="true">1.4.</strong> Rust</a></li><li class="chapter-item "><a href="../../user/adding-glean-to-your-project/javascript.html"><strong aria-hidden="true">1.5.</strong> JavaScript</a></li><li class="chapter-item "><a href="../../user/adding-glean-to-your-project/qt.html"><strong aria-hidden="true">1.6.</strong> Qt/QML</a></li><li class="chapter-item "><a href="../../user/adding-glean-to-your-project/server.html"><strong aria-hidden="true">1.7.</strong> Server</a></li><li class="chapter-item "><a href="../../user/adding-glean-to-your-project/enable-data-ingestion.html"><strong aria-hidden="true">1.8.</strong> Enable data ingestion</a></li></ol></li><li class="chapter-item "><a href="../../user/integrating-glean-for-product-managers.html"><strong aria-hidden="true">2.</strong> Integrating Glean for project managers</a></li><li class="chapter-item "><a href="../../user/metrics/index.html"><strong aria-hidden="true">3.</strong> Metrics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../user/metrics/adding-new-metrics.html"><strong aria-hidden="true">3.1.</strong> Adding new metrics</a></li><li class="chapter-item "><a href="../../user/metrics/testing-metrics.html"><strong aria-hidden="true">3.2.</strong> Testing metrics</a></li><li class="chapter-item "><a href="../../user/metrics/validation-checklist.html"><strong aria-hidden="true">3.3.</strong> Validating metrics</a></li><li class="chapter-item "><a href="../../user/metrics/error-reporting.html"><strong aria-hidden="true">3.4.</strong> Error reporting</a></li><li class="chapter-item "><a href="../../user/collected-metrics/metrics.html"><strong aria-hidden="true">3.5.</strong> Metrics collected by the Glean SDKs</a></li></ol></li><li class="chapter-item "><a href="../../user/pings/index.html"><strong aria-hidden="true">4.</strong> Pings</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../user/pings/custom.html"><strong aria-hidden="true">4.1.</strong> Adding new custom pings</a></li><li class="chapter-item "><a href="../../user/pings/testing-custom-pings.html"><strong aria-hidden="true">4.2.</strong> Testing custom pings</a></li><li class="chapter-item "><a href="../../user/pings/sent-by-glean.html"><strong aria-hidden="true">4.3.</strong> Pings sent by Glean</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../user/pings/baseline.html"><strong aria-hidden="true">4.3.1.</strong> Baseline Ping</a></li><li class="chapter-item "><a href="../../user/pings/deletion-request.html"><strong aria-hidden="true">4.3.2.</strong> Deletion Request Ping</a></li><li class="chapter-item "><a href="../../user/pings/events.html"><strong aria-hidden="true">4.3.3.</strong> Events Ping</a></li><li class="chapter-item "><a href="../../user/pings/metrics.html"><strong aria-hidden="true">4.3.4.</strong> Metrics Ping</a></li><li class="chapter-item "><a href="../../user/pings/ping-schedules-and-timings.html"><strong aria-hidden="true">4.3.5.</strong> Schedules and timings overview</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../user/server-knobs/index.html"><strong aria-hidden="true">5.</strong> Server Knobs: Glean Data Control Plane</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../user/server-knobs/metrics/index.html"><strong aria-hidden="true">5.1.</strong> Controlling Metrics with Server Knobs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../user/server-knobs/metrics/example-scenarios.html"><strong aria-hidden="true">5.1.1.</strong> Example Scenarios</a></li><li class="chapter-item "><a href="../../user/server-knobs/metrics/product-integration.html"><strong aria-hidden="true">5.1.2.</strong> Product Integration</a></li><li class="chapter-item "><a href="../../user/server-knobs/metrics/experimenter-configuration.html"><strong aria-hidden="true">5.1.3.</strong> Experimenter Configuration</a></li><li class="chapter-item "><a href="../../user/server-knobs/metrics/advanced-topics.html"><strong aria-hidden="true">5.1.4.</strong> Advanced Topics</a></li><li class="chapter-item "><a href="../../user/server-knobs/metrics/faq.html"><strong aria-hidden="true">5.1.5.</strong> Frequently Asked Questions</a></li></ol></li><li class="chapter-item "><a href="../../user/server-knobs/pings/index.html"><strong aria-hidden="true">5.2.</strong> Controlling Pings with Server Knobs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../user/server-knobs/pings/product-integration.html"><strong aria-hidden="true">5.2.1.</strong> Product Integration</a></li><li class="chapter-item "><a href="../../user/server-knobs/pings/experimenter-configuration.html"><strong aria-hidden="true">5.2.2.</strong> Experimenter Configuration</a></li></ol></li><li class="chapter-item "><a href="../../user/server-knobs/other/index.html"><strong aria-hidden="true">5.3.</strong> Other Server Knobs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../user/server-knobs/other/max-events.html"><strong aria-hidden="true">5.3.1.</strong> Max Events per Ping</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../user/debugging/index.html"><strong aria-hidden="true">6.</strong> Debugging products using Glean</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../user/debugging/android.html"><strong aria-hidden="true">6.1.</strong> Android</a></li><li class="chapter-item "><a href="../../user/debugging/ios.html"><strong aria-hidden="true">6.2.</strong> iOS</a></li><li class="chapter-item "><a href="../../user/debugging/python.html"><strong aria-hidden="true">6.3.</strong> Python</a></li><li class="chapter-item "><a href="../../user/debugging/javascript.html"><strong aria-hidden="true">6.4.</strong> JavaScript</a></li></ol></li><li class="chapter-item "><a href="../../user/howto/index.html"><strong aria-hidden="true">7.</strong> Walkthroughs and How-tos</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../user/howto/server-knobs-walkthrough/server-knobs-walkthrough.html"><strong aria-hidden="true">7.1.</strong> Server Knobs Walkthrough</a></li><li class="chapter-item "><a href="../../user/howto/real-time-events/real-time-events.html"><strong aria-hidden="true">7.2.</strong> "Real-Time" Events</a></li><li class="chapter-item "><a href="../../user/howto/investigating-data-issues/investigating-data-issues.html"><strong aria-hidden="true">7.3.</strong> Telemetry/Data Bug Investigation Recommendations</a></li></ol></li><li class="chapter-item "><li class="part-title">API Reference</li><li class="chapter-item "><a href="../../reference/yaml/index.html"><strong aria-hidden="true">8.</strong> YAML Registry Format</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../reference/yaml/metrics.html"><strong aria-hidden="true">8.1.</strong> Metrics</a></li><li class="chapter-item "><a href="../../reference/yaml/pings.html"><strong aria-hidden="true">8.2.</strong> Pings</a></li><li class="chapter-item "><a href="../../reference/yaml/tags.html"><strong aria-hidden="true">8.3.</strong> Tags</a></li></ol></li><li class="chapter-item "><a href="../../reference/general/index.html"><strong aria-hidden="true">9.</strong> General API</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../reference/general/initializing.html"><strong aria-hidden="true">9.1.</strong> Initializing</a></li><li class="chapter-item "><a href="../../reference/general/toggling-collection-status.html"><strong aria-hidden="true">9.2.</strong> Toggling collection status</a></li><li class="chapter-item "><a href="../../reference/general/experiments-api.html"><strong aria-hidden="true">9.3.</strong> Annotating experiments</a></li><li class="chapter-item "><a href="../../reference/general/register-custom-pings.html"><strong aria-hidden="true">9.4.</strong> Registering custom pings</a></li><li class="chapter-item "><a href="../../reference/general/shutdown.html"><strong aria-hidden="true">9.5.</strong> Shut down</a></li><li class="chapter-item "><a href="../../reference/general/glean-event-listener.html"><strong aria-hidden="true">9.6.</strong> EXPERIMENTAL: Glean Event Listener</a></li><li class="chapter-item "><a href="../../reference/general/attribution-api.html"><strong aria-hidden="true">9.7.</strong> Reporting Product Attribution and Distribution</a></li></ol></li><li class="chapter-item "><a href="../../reference/debug/index.html"><strong aria-hidden="true">10.</strong> Debugging</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../reference/debug/logPings.html"><strong aria-hidden="true">10.1.</strong> Log pings</a></li><li class="chapter-item "><a href="../../reference/debug/debugViewTag.html"><strong aria-hidden="true">10.2.</strong> Debug View Tag</a></li><li class="chapter-item "><a href="../../reference/debug/sourceTags.html"><strong aria-hidden="true">10.3.</strong> Source Tags</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/metrics/index.html"><strong aria-hidden="true">11.</strong> Metric types</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../reference/metrics/boolean.html"><strong aria-hidden="true">11.1.</strong> Boolean</a></li><li class="chapter-item "><a href="../../reference/metrics/labeled_booleans.html"><strong aria-hidden="true">11.2.</strong> Labeled Booleans</a></li><li class="chapter-item "><a href="../../reference/metrics/counter.html"><strong aria-hidden="true">11.3.</strong> Counter</a></li><li class="chapter-item "><a href="../../reference/metrics/labeled_counters.html"><strong aria-hidden="true">11.4.</strong> Labeled Counters</a></li><li class="chapter-item expanded "><a href="../../reference/metrics/dual_labeled_counters.html" class="active"><strong aria-hidden="true">11.5.</strong> Dual Labeled Counters</a></li><li class="chapter-item "><a href="../../reference/metrics/string.html"><strong aria-hidden="true">11.6.</strong> String</a></li><li class="chapter-item "><a href="../../reference/metrics/labeled_strings.html"><strong aria-hidden="true">11.7.</strong> Labeled Strings</a></li><li class="chapter-item "><a href="../../reference/metrics/string_list.html"><strong aria-hidden="true">11.8.</strong> String List</a></li><li class="chapter-item "><a href="../../reference/metrics/timespan.html"><strong aria-hidden="true">11.9.</strong> Timespan</a></li><li class="chapter-item "><a href="../../reference/metrics/timing_distribution.html"><strong aria-hidden="true">11.10.</strong> Timing Distribution</a></li><li class="chapter-item "><a href="../../reference/metrics/labeled_timing_distributions.html"><strong aria-hidden="true">11.11.</strong> Labeled Timing Distributions</a></li><li class="chapter-item "><a href="../../reference/metrics/memory_distribution.html"><strong aria-hidden="true">11.12.</strong> Memory Distribution</a></li><li class="chapter-item "><a href="../../reference/metrics/labeled_memory_distributions.html"><strong aria-hidden="true">11.13.</strong> Labeled Memory Distributions</a></li><li class="chapter-item "><a href="../../reference/metrics/uuid.html"><strong aria-hidden="true">11.14.</strong> UUID</a></li><li class="chapter-item "><a href="../../reference/metrics/url.html"><strong aria-hidden="true">11.15.</strong> URL</a></li><li class="chapter-item "><a href="../../reference/metrics/datetime.html"><strong aria-hidden="true">11.16.</strong> Datetime</a></li><li class="chapter-item "><a href="../../reference/metrics/event.html"><strong aria-hidden="true">11.17.</strong> Event</a></li><li class="chapter-item "><a href="../../reference/metrics/custom_distribution.html"><strong aria-hidden="true">11.18.</strong> Custom Distribution</a></li><li class="chapter-item "><a href="../../reference/metrics/labeled_custom_distributions.html"><strong aria-hidden="true">11.19.</strong> Labeled Custom Distributions</a></li><li class="chapter-item "><a href="../../reference/metrics/quantity.html"><strong aria-hidden="true">11.20.</strong> Quantity</a></li><li class="chapter-item "><a href="../../reference/metrics/labeled_quantity.html"><strong aria-hidden="true">11.21.</strong> Labeled Quantities</a></li><li class="chapter-item "><a href="../../reference/metrics/rate.html"><strong aria-hidden="true">11.22.</strong> Rate</a></li><li class="chapter-item "><a href="../../reference/metrics/text.html"><strong aria-hidden="true">11.23.</strong> Text</a></li><li class="chapter-item "><a href="../../reference/metrics/object.html"><strong aria-hidden="true">11.24.</strong> Object</a></li></ol></li><li class="chapter-item "><a href="../../reference/pings/index.html"><strong aria-hidden="true">12.</strong> Pings</a></li><li class="chapter-item affix "><li class="part-title">SDK Specific Information</li><li class="chapter-item "><a href="../../language-bindings/index.html"><strong aria-hidden="true">13.</strong> Overview</a></li><li class="chapter-item "><a href="../../language-bindings/android/index.html"><strong aria-hidden="true">14.</strong> Android</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../language-bindings/android/android-build-configuration-options.html"><strong aria-hidden="true">14.1.</strong> Android build configuration options</a></li><li class="chapter-item "><a href="../../language-bindings/android/android-offline-builds.html"><strong aria-hidden="true">14.2.</strong> Android offline builds</a></li><li class="chapter-item "><a href="../../language-bindings/android/instrument-android-crashes-example.html"><strong aria-hidden="true">14.3.</strong> Instrumenting Android crashes with Glean</a></li><li class="chapter-item "><a href="../../language-bindings/android/gecko-content-processes-and-glean.html"><strong aria-hidden="true">14.4.</strong> GeckoView Content Processes and Glean</a></li></ol></li><li class="chapter-item "><a href="../../language-bindings/ios/index.html"><strong aria-hidden="true">15.</strong> iOS</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../language-bindings/ios/ios-build-configuration-options.html"><strong aria-hidden="true">15.1.</strong> iOS build configuration options</a></li></ol></li><li class="chapter-item "><a href="../../language-bindings/javascript/index.html"><strong aria-hidden="true">16.</strong> JavaScript</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../language-bindings/javascript/cli.html"><strong aria-hidden="true">16.1.</strong> Command Line Interface</a></li><li class="chapter-item "><a href="../../language-bindings/javascript/plugins/index.html"><strong aria-hidden="true">16.2.</strong> Plugins</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../language-bindings/javascript/plugins/encryption.html"><strong aria-hidden="true">16.2.1.</strong> Ping Encryption Plugin</a></li></ol></li></ol></li><li class="chapter-item "><li class="part-title">Appendix</li><li class="chapter-item "><a href="../../appendix/glossary.html"><strong aria-hidden="true">17.</strong> Glossary</a></li><li class="chapter-item "><a href="../../appendix/changelog/index.html"><strong aria-hidden="true">18.</strong> Changelog</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../appendix/changelog/sdk.html"><strong aria-hidden="true">18.1.</strong> mozilla/glean</a></li><li class="chapter-item "><a href="../../appendix/changelog/js.html"><strong aria-hidden="true">18.2.</strong> mozilla/glean.js</a></li></ol></li><li class="chapter-item "><a href="../../appendix/twig.html"><strong aria-hidden="true">19.</strong> This Week in Glean</a></li><li class="chapter-item "><a href="../../appendix/contribution-guidelines.html"><strong aria-hidden="true">20.</strong> Contribution Guidelines</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Glean SDKs - Cross-platform Telemetry Libraries</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/mozilla/glean" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/mozilla/glean/edit/main/docs/user/./reference/metrics/dual_labeled_counters.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="dual-labeled-counters"><a class="header" href="#dual-labeled-counters">Dual Labeled Counters</a></h1>
<p>Dual labeled counters allow two levels of labels for a counter. This metric type allows recording counts along two dimensions.
These labels are organized into a nested structure in the payload with a &quot;key&quot; label at the top level with &quot;category&quot; sub-labels that map to the underlying count.
Each counter always starts from <code>0</code>.
Each time you record to a dual labeled counter, its value is incremented.
Unless incremented by a positive value, a counter will not be reported in pings,
that means: the value <code>0</code> is never sent in a ping.</p>
<h2 id="recording-api"><a class="header" href="#recording-api">Recording API</a></h2>
<h3 id="add"><a class="header" href="#add"><code>add</code></a></h3>
<p>Increases one of the key and category pairs in a dual labeled counter metric by a certain amount.
If no amount is passed it defaults to <code>1</code>.</p>
<div class="tabs">
<div class="tabbar"></div>
<div class="tabcontents">
<div data-lang="Kotlin" class="tab"></div>
<div data-lang="Java" class="tab"></div>
<div data-lang="Swift" class="tab"></div>
<div data-lang="Python" class="tab"></div>
<div data-lang="Rust" class="tab">
<pre><code class="language-Rust">use glean_metrics::glean_upload;

glean_upload::failures.get(&quot;metrics&quot;, &quot;recoverable network error&quot;).add(1); // Adds 1 to the &quot;metrics: recoverable network error&quot; counter.
glean_upload::failures.get(&quot;baseline&quot;, &quot;4xx&quot;).add(3); // Adds 3 to the &quot;baseline: 4xx&quot; counter.
</code></pre>
</div>
<div data-lang="JavaScript" class="tab"></div>
<div data-lang="Firefox Desktop" class="tab">
<p><strong>C++</strong></p>
<pre><code class="language-cpp">#include &quot;mozilla/glean/GleanMetrics.h&quot;

mozilla::glean::glean_upload::failures.Get(&quot;metrics&quot;_ns, &quot;recoverable network error&quot;_ns).Add(1);
mozilla::glean::glean_upload::failures.Get(&quot;baseline&quot;_ns, &quot;4xx&quot;_ns).Add(3);
</code></pre>
<p><strong>JavaScript</strong></p>
<pre><code class="language-js">Glean.gleanUpload.failures.get(&quot;metrics&quot;, &quot;recoverable network error&quot;).add(1);
Glean.gleanUpload.failures.get(&quot;baseline&quot;, &quot;4xx&quot;).add(3);
</code></pre>
</div>
</div>
</div>
<h4 id="recorded-errors"><a class="header" href="#recorded-errors">Recorded Errors</a></h4>
<ul>
<li><a href="../../user/metrics/error-reporting.html"><code>invalid_value</code></a>: if the counter is incremented by a negative value
(or, in versions up to and including 54.0.0, <code>0</code>).</li>
<li><a href="../../user/metrics/error-reporting.html"><code>invalid_type</code></a>: if a floating point or non-number value is given.</li>
<li><a href="../../user/metrics/error-reporting.html"><code>invalid_label</code></a>:
<ul>
<li>If the label contains invalid characters. Data is still recorded to the special label <code>__other__</code>.</li>
<li>If the label exceeds the maximum number of allowed characters. Data is still recorded to the special label <code>__other__</code>.</li>
</ul>
</li>
</ul>
<h4 id="limits"><a class="header" href="#limits">Limits</a></h4>
<ul>
<li>Only increments</li>
<li>Saturates at the largest value that can be represented as a 32-bit signed integer.</li>
<li>Key and category labels must conform to the <a href="index.html#label-format">label format</a>.</li>
<li>Each key or category label may have a maximum of 111 characters.</li>
<li>The lists of key and category labels are limited to:
<ul>
<li>16 different dynamic key labels and 16 category labels, if no static labels are defined.
Additional key and category labels will all record to the special label <code>__other__</code>.
These labels may contain any UTF-8 characters.</li>
<li>4096 key labels and 4096 category labels if specified as static labels in <code>metrics.yaml</code>, see <a href="#key">key</a> and <a href="#category">category</a>.
Unknown key and category labels will be recorded under the special label <code>__other__</code>.
These labels may only be made of printable ASCII characters.</li>
</ul>
</li>
</ul>
<h2 id="testing-api"><a class="header" href="#testing-api">Testing API</a></h2>
<h3 id="testgetvalue"><a class="header" href="#testgetvalue"><code>testGetValue</code></a></h3>
<p>Gets the recorded value for a given key and category pair in a dual labeled counter metric.<br />
Returns the count if data is stored.<br />
Returns a language-specific empty/null value if no data is stored.
Has an optional argument to specify the name of the ping you wish to retrieve data from, except
in Rust where it's required. <code>None</code> or no argument will default to the first value found for <code>send_in_pings</code>.</p>
<div class="tabs">
<div class="tabbar"></div>
<div class="tabcontents">
<div data-lang="Kotlin" class="tab"></div>
<div data-lang="Java" class="tab"></div>
<div data-lang="Swift" class="tab"></div>
<div data-lang="Python" class="tab"></div>
<div data-lang="Rust" class="tab">
<pre><code class="language-Rust">use glean_metrics::glean_upload;

let values = glean_upload::failures.test_get_value(None).unwrap();
// Do the counters have the expected values?
assert_eq!(1, values.get(&quot;metrics&quot;).unwrap().get(&quot;recoverable network error&quot;).unwrap());
assert_eq!(3, values.get(&quot;baseline&quot;).unwrap().get(&quot;4xx&quot;).unwrap());
</code></pre>
</div>
<div data-lang="JavaScript" class="tab"></div>
<div data-lang="Firefox Desktop" class="tab">
<p><strong>C++</strong></p>
<pre><code class="language-cpp">#include &quot;mozilla/glean/GleanMetrics.h&quot;

ASSERT_EQ(1,
          mozilla::glean::glean_upload::failures.Get(&quot;metrics&quot;_ns, &quot;recoverable network error&quot;_ns)
              .TestGetValue()
              .unwrap()
              .ref());
ASSERT_EQ(3,
          mozilla::glean::glean_upload::failures.Get(&quot;baseline&quot;_ns, &quot;4xx&quot;_ns)
              .TestGetValue()
              .unwrap()
              .ref());
</code></pre>
<p><strong>JavaScript</strong></p>
<pre><code class="language-js">Assert.equal(
  1,
  Glean.gleanUpload.failures
    .get(&quot;metrics&quot;, &quot;recoverable network error&quot;)
    .testGetValue()
);
Assert.equal(
  3,
  Glean.gleanUpload.failures
    .get(&quot;baseline&quot;, &quot;4xx&quot;)
    .testGetValue()
);
</code></pre>
</div>
</div>
</div>
<h3 id="testgetnumrecordederrors"><a class="header" href="#testgetnumrecordederrors"><code>testGetNumRecordedErrors</code></a></h3>
<p>Gets the number of errors recorded for a given labeled counter metric in total.</p>
<div class="tabs">
<div class="tabbar"></div>
<div class="tabcontents">
<div data-lang="Kotlin" class="tab"></div>
<div data-lang="Java" class="tab"></div>
<div data-lang="Swift" class="tab"></div>
<div data-lang="Python" class="tab"></div>
<div data-lang="Rust" class="tab">
<pre><code class="language-Rust">use glean::ErrorType;

use glean_metrics::glean_upload;

// Were there any invalid labels?
assert_eq!(
  0,
  glean_uploade::failures.test_get_num_recorded_errors(
    ErrorType::InvalidLabel
  )
);
</code></pre>
</div>
<div data-lang="JavaScript" class="tab"></div>
<div data-lang="Firefox Desktop" class="tab" data-info="Firefox Desktop uses testGetValue to communicate errors"></div>
</div>
</div>
<h2 id="metric-parameters"><a class="header" href="#metric-parameters">Metric parameters</a></h2>
<p>Example dual labeled counter metric definition:</p>
<pre><code class="language-YAML">glean_upload:
  failures:
    type: dual_labeled_counter
    description: &gt;
      Counts the number of upload failures by category per ping that occur in the application.
    bugs:
      - https://bugzilla.mozilla.org/000000
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=000000#c3
    notification_emails:
      - me@mozilla.com
    expires: 2020-10-01
    dual_labels:
      key:
        description: The ping associated with the upload failure
        labels:
          - baseline
          - events
          - metrics
      category:
        description: The category of failure that was encountered
        labels:
          - recoverable network error
          - 4xx
          - 5xx
          - unknown
      ...
</code></pre>
<h3 id="extra-metric-parameters"><a class="header" href="#extra-metric-parameters">Extra metric parameters</a></h3>
<h4 id="dual_labels"><a class="header" href="#dual_labels"><code>dual_labels:</code></a></h4>
<p>Dual labeled metrics have a required <code>dual_labels</code> parameter, which in turn has required <code>key</code> and <code>category</code> parameters.</p>
<h5 id="key"><a class="header" href="#key"><code>key</code></a></h5>
<p>The <code>key</code> parameter has a required <code>description</code> field to describe the dimension, along with an optional <code>labels</code> parameter which accepts a list of static labels.
The labels in this list must match the following requirements:</p>
<ul>
<li>Conform to the <a href="index.html#label-format">label format</a>.</li>
<li>Each label must have a maximum of 111 characters.</li>
<li>Each label must only contain printable ASCII characters.</li>
<li>This list itself is limited to 4096 labels.</li>
</ul>
<h5 id="category"><a class="header" href="#category"><code>category</code></a></h5>
<p>The <code>category</code> parameter has a required <code>description</code> field to describe the dimension, along with an optional <code>labels</code> parameter which accepts a list of static labels.
The labels in this list must match the following requirements:</p>
<ul>
<li>Conform to the <a href="index.html#label-format">label format</a>.</li>
<li>Each label must have a maximum of 111 characters.</li>
<li>Each label must only contain printable ASCII characters.</li>
<li>This list itself is limited to 4096 labels.</li>
</ul>
<div class="special-quote special-quote-warning fa fa-exclamation-triangle"></div>
<h5 id="important"><a class="header" href="#important">Important</a></h5>
<blockquote>
<p>If the key and/or category labels are specified in the <code>metrics.yaml</code>, using any label not listed
will be replaced with the special value <code>__other__</code>.</p>
<p>If the key and/or category labels are <strong>not</strong> specified in the <code>metrics.yaml</code>, only 16 different dynamic labels
may be used, after which the special value <code>__other__</code> will be used.</p>
</blockquote>
<p>Removing or changing key and category labels, including their order in the registry file, is permitted.
Avoid reusing key and category labels that were removed in the past. It is best practice to add documentation
when they are removed to the description field so that analysts will know of their existence and meaning in
historical data. Special care must be taken when changing GeckoView metrics sent through the Glean SDK, as the
index of the labels is used to report Gecko data through the Glean SDK.</p>
<h2 id="data-questions"><a class="header" href="#data-questions">Data questions</a></h2>
<ul>
<li>How many upload errors in each category do we have for each ping type?</li>
</ul>
<h2 id="reference"><a class="header" href="#reference">Reference</a></h2>
<ul>
<li>Rust API docs: <a href="../../../docs/glean/private/struct.DualLabeledMetric.html"><code>DualLabeledMetric</code></a>, <a href="../../../docs/glean/private/struct.CounterMetric.html"><code>CounterMetric</code></a></li>
</ul>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/mozilla/glean/edit/main/docs/user/reference/metrics/dual_labeled_counters.md">Edit this page on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../reference/metrics/labeled_counters.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../reference/metrics/string.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../reference/metrics/labeled_counters.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../reference/metrics/string.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../../shared/tabs.js"></script>
        <script src="../../../shared/mermaid.min.js"></script>
        <script src="../../../shared/mermaid-init.js"></script>
        <script src="../../chart.min.js"></script>
        <script src="../../chart-distributions.js"></script>
        <script src="../../chart-distributions-ui.js"></script>


    </div>
    </body>
</html>
