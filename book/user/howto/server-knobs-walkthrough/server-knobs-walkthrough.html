<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Server Knobs Walkthrough - Glean SDKs - Cross-platform Telemetry Libraries</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../../../shared/glean.css">
        <link rel="stylesheet" href="../../../../shared/mermaid.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../../../index.html">Glean</a></li><li class="chapter-item affix "><li class="part-title">User Guides</li><li class="chapter-item "><a href="../../../user/adding-glean-to-your-project/index.html"><strong aria-hidden="true">1.</strong> Adding Glean to your project</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../user/adding-glean-to-your-project/kotlin.html"><strong aria-hidden="true">1.1.</strong> Kotlin</a></li><li class="chapter-item "><a href="../../../user/adding-glean-to-your-project/swift.html"><strong aria-hidden="true">1.2.</strong> Swift</a></li><li class="chapter-item "><a href="../../../user/adding-glean-to-your-project/python.html"><strong aria-hidden="true">1.3.</strong> Python</a></li><li class="chapter-item "><a href="../../../user/adding-glean-to-your-project/rust.html"><strong aria-hidden="true">1.4.</strong> Rust</a></li><li class="chapter-item "><a href="../../../user/adding-glean-to-your-project/javascript.html"><strong aria-hidden="true">1.5.</strong> JavaScript</a></li><li class="chapter-item "><a href="../../../user/adding-glean-to-your-project/qt.html"><strong aria-hidden="true">1.6.</strong> Qt/QML</a></li><li class="chapter-item "><a href="../../../user/adding-glean-to-your-project/server.html"><strong aria-hidden="true">1.7.</strong> Server</a></li><li class="chapter-item "><a href="../../../user/adding-glean-to-your-project/enable-data-ingestion.html"><strong aria-hidden="true">1.8.</strong> Enable data ingestion</a></li></ol></li><li class="chapter-item "><a href="../../../user/integrating-glean-for-product-managers.html"><strong aria-hidden="true">2.</strong> Integrating Glean for project managers</a></li><li class="chapter-item "><a href="../../../user/metrics/index.html"><strong aria-hidden="true">3.</strong> Metrics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../user/metrics/adding-new-metrics.html"><strong aria-hidden="true">3.1.</strong> Adding new metrics</a></li><li class="chapter-item "><a href="../../../user/metrics/testing-metrics.html"><strong aria-hidden="true">3.2.</strong> Testing metrics</a></li><li class="chapter-item "><a href="../../../user/metrics/validation-checklist.html"><strong aria-hidden="true">3.3.</strong> Validating metrics</a></li><li class="chapter-item "><a href="../../../user/metrics/error-reporting.html"><strong aria-hidden="true">3.4.</strong> Error reporting</a></li><li class="chapter-item "><a href="../../../user/collected-metrics/metrics.html"><strong aria-hidden="true">3.5.</strong> Metrics collected by the Glean SDKs</a></li></ol></li><li class="chapter-item "><a href="../../../user/pings/index.html"><strong aria-hidden="true">4.</strong> Pings</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../user/pings/custom.html"><strong aria-hidden="true">4.1.</strong> Adding new custom pings</a></li><li class="chapter-item "><a href="../../../user/pings/testing-custom-pings.html"><strong aria-hidden="true">4.2.</strong> Testing custom pings</a></li><li class="chapter-item "><a href="../../../user/pings/sent-by-glean.html"><strong aria-hidden="true">4.3.</strong> Pings sent by Glean</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../user/pings/baseline.html"><strong aria-hidden="true">4.3.1.</strong> Baseline Ping</a></li><li class="chapter-item "><a href="../../../user/pings/deletion-request.html"><strong aria-hidden="true">4.3.2.</strong> Deletion Request Ping</a></li><li class="chapter-item "><a href="../../../user/pings/events.html"><strong aria-hidden="true">4.3.3.</strong> Events Ping</a></li><li class="chapter-item "><a href="../../../user/pings/metrics.html"><strong aria-hidden="true">4.3.4.</strong> Metrics Ping</a></li><li class="chapter-item "><a href="../../../user/pings/ping-schedules-and-timings.html"><strong aria-hidden="true">4.3.5.</strong> Schedules and timings overview</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../../user/server-knobs/index.html"><strong aria-hidden="true">5.</strong> Server Knobs: Glean Data Control Plane</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../user/server-knobs/metrics/index.html"><strong aria-hidden="true">5.1.</strong> Controlling Metrics with Server Knobs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../user/server-knobs/metrics/example-scenarios.html"><strong aria-hidden="true">5.1.1.</strong> Example Scenarios</a></li><li class="chapter-item "><a href="../../../user/server-knobs/metrics/product-integration.html"><strong aria-hidden="true">5.1.2.</strong> Product Integration</a></li><li class="chapter-item "><a href="../../../user/server-knobs/metrics/experimenter-configuration.html"><strong aria-hidden="true">5.1.3.</strong> Experimenter Configuration</a></li><li class="chapter-item "><a href="../../../user/server-knobs/metrics/advanced-topics.html"><strong aria-hidden="true">5.1.4.</strong> Advanced Topics</a></li><li class="chapter-item "><a href="../../../user/server-knobs/metrics/faq.html"><strong aria-hidden="true">5.1.5.</strong> Frequently Asked Questions</a></li></ol></li><li class="chapter-item "><a href="../../../user/server-knobs/pings/index.html"><strong aria-hidden="true">5.2.</strong> Controlling Pings with Server Knobs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../user/server-knobs/pings/product-integration.html"><strong aria-hidden="true">5.2.1.</strong> Product Integration</a></li><li class="chapter-item "><a href="../../../user/server-knobs/pings/experimenter-configuration.html"><strong aria-hidden="true">5.2.2.</strong> Experimenter Configuration</a></li></ol></li><li class="chapter-item "><a href="../../../user/server-knobs/other/index.html"><strong aria-hidden="true">5.3.</strong> Other Server Knobs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../user/server-knobs/other/max-events.html"><strong aria-hidden="true">5.3.1.</strong> Max Events per Ping</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../../user/debugging/index.html"><strong aria-hidden="true">6.</strong> Debugging products using Glean</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../user/debugging/android.html"><strong aria-hidden="true">6.1.</strong> Android</a></li><li class="chapter-item "><a href="../../../user/debugging/ios.html"><strong aria-hidden="true">6.2.</strong> iOS</a></li><li class="chapter-item "><a href="../../../user/debugging/python.html"><strong aria-hidden="true">6.3.</strong> Python</a></li><li class="chapter-item "><a href="../../../user/debugging/javascript.html"><strong aria-hidden="true">6.4.</strong> JavaScript</a></li></ol></li><li class="chapter-item expanded "><a href="../../../user/howto/index.html"><strong aria-hidden="true">7.</strong> Walkthroughs and How-tos</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../user/howto/server-knobs-walkthrough/server-knobs-walkthrough.html" class="active"><strong aria-hidden="true">7.1.</strong> Server Knobs Walkthrough</a></li><li class="chapter-item "><a href="../../../user/howto/real-time-events/real-time-events.html"><strong aria-hidden="true">7.2.</strong> "Real-Time" Events</a></li><li class="chapter-item "><a href="../../../user/howto/investigating-data-issues/investigating-data-issues.html"><strong aria-hidden="true">7.3.</strong> Telemetry/Data Bug Investigation Recommendations</a></li></ol></li><li class="chapter-item "><li class="part-title">API Reference</li><li class="chapter-item "><a href="../../../reference/yaml/index.html"><strong aria-hidden="true">8.</strong> YAML Registry Format</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../reference/yaml/metrics.html"><strong aria-hidden="true">8.1.</strong> Metrics</a></li><li class="chapter-item "><a href="../../../reference/yaml/pings.html"><strong aria-hidden="true">8.2.</strong> Pings</a></li><li class="chapter-item "><a href="../../../reference/yaml/tags.html"><strong aria-hidden="true">8.3.</strong> Tags</a></li></ol></li><li class="chapter-item "><a href="../../../reference/general/index.html"><strong aria-hidden="true">9.</strong> General API</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../reference/general/initializing.html"><strong aria-hidden="true">9.1.</strong> Initializing</a></li><li class="chapter-item "><a href="../../../reference/general/toggling-collection-status.html"><strong aria-hidden="true">9.2.</strong> Toggling collection status</a></li><li class="chapter-item "><a href="../../../reference/general/experiments-api.html"><strong aria-hidden="true">9.3.</strong> Annotating experiments</a></li><li class="chapter-item "><a href="../../../reference/general/register-custom-pings.html"><strong aria-hidden="true">9.4.</strong> Registering custom pings</a></li><li class="chapter-item "><a href="../../../reference/general/shutdown.html"><strong aria-hidden="true">9.5.</strong> Shut down</a></li><li class="chapter-item "><a href="../../../reference/general/glean-event-listener.html"><strong aria-hidden="true">9.6.</strong> EXPERIMENTAL: Glean Event Listener</a></li><li class="chapter-item "><a href="../../../reference/general/attribution-api.html"><strong aria-hidden="true">9.7.</strong> Reporting Product Attribution and Distribution</a></li></ol></li><li class="chapter-item "><a href="../../../reference/debug/index.html"><strong aria-hidden="true">10.</strong> Debugging</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../reference/debug/logPings.html"><strong aria-hidden="true">10.1.</strong> Log pings</a></li><li class="chapter-item "><a href="../../../reference/debug/debugViewTag.html"><strong aria-hidden="true">10.2.</strong> Debug View Tag</a></li><li class="chapter-item "><a href="../../../reference/debug/sourceTags.html"><strong aria-hidden="true">10.3.</strong> Source Tags</a></li></ol></li><li class="chapter-item "><a href="../../../reference/metrics/index.html"><strong aria-hidden="true">11.</strong> Metric types</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../reference/metrics/boolean.html"><strong aria-hidden="true">11.1.</strong> Boolean</a></li><li class="chapter-item "><a href="../../../reference/metrics/labeled_booleans.html"><strong aria-hidden="true">11.2.</strong> Labeled Booleans</a></li><li class="chapter-item "><a href="../../../reference/metrics/counter.html"><strong aria-hidden="true">11.3.</strong> Counter</a></li><li class="chapter-item "><a href="../../../reference/metrics/labeled_counters.html"><strong aria-hidden="true">11.4.</strong> Labeled Counters</a></li><li class="chapter-item "><a href="../../../reference/metrics/dual_labeled_counters.html"><strong aria-hidden="true">11.5.</strong> Dual Labeled Counters</a></li><li class="chapter-item "><a href="../../../reference/metrics/string.html"><strong aria-hidden="true">11.6.</strong> String</a></li><li class="chapter-item "><a href="../../../reference/metrics/labeled_strings.html"><strong aria-hidden="true">11.7.</strong> Labeled Strings</a></li><li class="chapter-item "><a href="../../../reference/metrics/string_list.html"><strong aria-hidden="true">11.8.</strong> String List</a></li><li class="chapter-item "><a href="../../../reference/metrics/timespan.html"><strong aria-hidden="true">11.9.</strong> Timespan</a></li><li class="chapter-item "><a href="../../../reference/metrics/timing_distribution.html"><strong aria-hidden="true">11.10.</strong> Timing Distribution</a></li><li class="chapter-item "><a href="../../../reference/metrics/labeled_timing_distributions.html"><strong aria-hidden="true">11.11.</strong> Labeled Timing Distributions</a></li><li class="chapter-item "><a href="../../../reference/metrics/memory_distribution.html"><strong aria-hidden="true">11.12.</strong> Memory Distribution</a></li><li class="chapter-item "><a href="../../../reference/metrics/labeled_memory_distributions.html"><strong aria-hidden="true">11.13.</strong> Labeled Memory Distributions</a></li><li class="chapter-item "><a href="../../../reference/metrics/uuid.html"><strong aria-hidden="true">11.14.</strong> UUID</a></li><li class="chapter-item "><a href="../../../reference/metrics/url.html"><strong aria-hidden="true">11.15.</strong> URL</a></li><li class="chapter-item "><a href="../../../reference/metrics/datetime.html"><strong aria-hidden="true">11.16.</strong> Datetime</a></li><li class="chapter-item "><a href="../../../reference/metrics/event.html"><strong aria-hidden="true">11.17.</strong> Event</a></li><li class="chapter-item "><a href="../../../reference/metrics/custom_distribution.html"><strong aria-hidden="true">11.18.</strong> Custom Distribution</a></li><li class="chapter-item "><a href="../../../reference/metrics/labeled_custom_distributions.html"><strong aria-hidden="true">11.19.</strong> Labeled Custom Distributions</a></li><li class="chapter-item "><a href="../../../reference/metrics/quantity.html"><strong aria-hidden="true">11.20.</strong> Quantity</a></li><li class="chapter-item "><a href="../../../reference/metrics/labeled_quantity.html"><strong aria-hidden="true">11.21.</strong> Labeled Quantities</a></li><li class="chapter-item "><a href="../../../reference/metrics/rate.html"><strong aria-hidden="true">11.22.</strong> Rate</a></li><li class="chapter-item "><a href="../../../reference/metrics/text.html"><strong aria-hidden="true">11.23.</strong> Text</a></li><li class="chapter-item "><a href="../../../reference/metrics/object.html"><strong aria-hidden="true">11.24.</strong> Object</a></li></ol></li><li class="chapter-item "><a href="../../../reference/pings/index.html"><strong aria-hidden="true">12.</strong> Pings</a></li><li class="chapter-item affix "><li class="part-title">SDK Specific Information</li><li class="chapter-item "><a href="../../../language-bindings/index.html"><strong aria-hidden="true">13.</strong> Overview</a></li><li class="chapter-item "><a href="../../../language-bindings/android/index.html"><strong aria-hidden="true">14.</strong> Android</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../language-bindings/android/android-build-configuration-options.html"><strong aria-hidden="true">14.1.</strong> Android build configuration options</a></li><li class="chapter-item "><a href="../../../language-bindings/android/android-offline-builds.html"><strong aria-hidden="true">14.2.</strong> Android offline builds</a></li><li class="chapter-item "><a href="../../../language-bindings/android/instrument-android-crashes-example.html"><strong aria-hidden="true">14.3.</strong> Instrumenting Android crashes with Glean</a></li><li class="chapter-item "><a href="../../../language-bindings/android/gecko-content-processes-and-glean.html"><strong aria-hidden="true">14.4.</strong> GeckoView Content Processes and Glean</a></li></ol></li><li class="chapter-item "><a href="../../../language-bindings/ios/index.html"><strong aria-hidden="true">15.</strong> iOS</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../language-bindings/ios/ios-build-configuration-options.html"><strong aria-hidden="true">15.1.</strong> iOS build configuration options</a></li></ol></li><li class="chapter-item "><a href="../../../language-bindings/javascript/index.html"><strong aria-hidden="true">16.</strong> JavaScript</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../language-bindings/javascript/cli.html"><strong aria-hidden="true">16.1.</strong> Command Line Interface</a></li><li class="chapter-item "><a href="../../../language-bindings/javascript/plugins/index.html"><strong aria-hidden="true">16.2.</strong> Plugins</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../language-bindings/javascript/plugins/encryption.html"><strong aria-hidden="true">16.2.1.</strong> Ping Encryption Plugin</a></li></ol></li></ol></li><li class="chapter-item "><li class="part-title">Appendix</li><li class="chapter-item "><a href="../../../appendix/glossary.html"><strong aria-hidden="true">17.</strong> Glossary</a></li><li class="chapter-item "><a href="../../../appendix/changelog/index.html"><strong aria-hidden="true">18.</strong> Changelog</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../appendix/changelog/sdk.html"><strong aria-hidden="true">18.1.</strong> mozilla/glean</a></li><li class="chapter-item "><a href="../../../appendix/changelog/js.html"><strong aria-hidden="true">18.2.</strong> mozilla/glean.js</a></li></ol></li><li class="chapter-item "><a href="../../../appendix/twig.html"><strong aria-hidden="true">19.</strong> This Week in Glean</a></li><li class="chapter-item "><a href="../../../appendix/contribution-guidelines.html"><strong aria-hidden="true">20.</strong> Contribution Guidelines</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Glean SDKs - Cross-platform Telemetry Libraries</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/mozilla/glean" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/mozilla/glean/edit/main/docs/user/./user/howto/server-knobs-walkthrough/server-knobs-walkthrough.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="server-knobs-a-complete-walkthrough"><a class="header" href="#server-knobs-a-complete-walkthrough">Server Knobs: A Complete Walkthrough</a></h1>
<h2 id="purpose"><a class="header" href="#purpose">Purpose</a></h2>
<p>This documentation serves as a step by step guide on how to create a Server Knobs configuration and make use of it in a <a href="https://experimenter.info">Nimbus</a> experiment or rollout. The intent is to explain everything from selecting the metrics or pings you wish to control all the way through launching the experiment or rollout and validating the data is being collected.</p>
<h2 id="audience"><a class="header" href="#audience">Audience</a></h2>
<p>This documentation is aimed at the general users of Nimbus experimentation who wish to enable or disable specific metrics and/or pings as part of their deployment. This documentation assumes the reader has no special knowledge of the inner workings of either Glean or Nimbus, but it does assume that the audience has already undergone the prerequisite Nimbus training program and has access to Experimenter to create experiment and rollout definitions.</p>
<h2 id="lets-get-started"><a class="header" href="#lets-get-started">Let’s Get Started!</a></h2>
<p>The first step in running a Server Knobs experiment or rollout is creating the definition for it in <a href="https://experimenter.services.mozilla.com">Experimenter</a>. For the purposes of this walkthrough, a rollout will be used but the instructions are interchangeable if you are instead launching an experiment.</p>
<h3 id="experiment-setup"><a class="header" href="#experiment-setup">Experiment Setup</a></h3>
<h4 id="create-a-new-experiment"><a class="header" href="#create-a-new-experiment">Create a new experiment</a></h4>
<p>From the Experimenter landing page, we select the “Create New” button to begin defining the new rollout.</p>
<p><img src="./images/sk_walkthrough_image1.png" alt="Experimenter landing page" title="Experimenter landing page" /></p>
<h4 id="initial-experiment-definition"><a class="header" href="#initial-experiment-definition">Initial experiment definition</a></h4>
<p>The initial setup requires a name, hypothesis, and the selection of a target application.</p>
<p><img src="./images/sk_walkthrough_image2.png" alt="New experiment dialog" title="New experiment dialog" /></p>
<p>Here we enter a human readable name for the rollout and a brief synopsis of what we expect to learn in the “Hypothesis” section. In the final field we select our target application, Firefox Desktop. When that is complete, we click the “Next” button to proceed with the rollout definition.</p>
<p>The next screen we are presented with is the “Summary” page of the experiment/rollout, where we can add additional metadata like a longer description, and link to any briefs or other documentation related to the rollout. We complete the required information and then click on “Save and Continue”</p>
<p><img src="./images/sk_walkthrough_image3.png" alt="Experiment summary page" title="Experiment summary page" /></p>
<h4 id="initial-branch-configuration"><a class="header" href="#initial-branch-configuration">Initial branch configuration</a></h4>
<p>The next screen we are presented with is the branch configuration page. On this page we can select the <code>glean</code> feature, and check the box to indicate that this is a rollout.</p>
<p><img src="./images/sk_walkthrough_image4.png" alt="Branch configuration page" title="Branch configuration page" /></p>
<p>At this point, we now need to create a bit of JSON configuration to put in the box seen here:</p>
<p><img src="./images/sk_walkthrough_image5.png" alt="Branch payload text box" title="Branch payload text box" /></p>
<h4 id="building-the-server-knobs-configuration-for-metrics"><a class="header" href="#building-the-server-knobs-configuration-for-metrics">Building the Server Knobs configuration for metrics</a></h4>
<p>This JSON configuration is the set of instructions for Glean that lets it know which metrics to enable or disable. In order to do this, we will visit the Glean Dictionary to help identify the metrics we wish to work with and get the identifiers from them needed for the configuration in Experimenter.</p>
<p>Upon arriving at the Glean Dictionary, we must first find the right application.</p>
<p><img src="./images/sk_walkthrough_image6.png" alt="Glean Dictionary landing page" title="Glean Dictionary landing page" /></p>
<p>We are going to select “Firefox for Desktop” to match the application we previously selected in Experimenter. This brings us to a screen where we can search and filter for metrics which are defined in the application.</p>
<p><img src="./images/sk_walkthrough_image7.png" alt="Glean Dictionary page for Firefox Desktop" title="Glean Dictionary page for Firefox Desktop" /></p>
<p>To help locate the metrics we are interested in, start typing in the search box at the top of the list. For instance, if we were interested in urlbar metrics:</p>
<p><img src="./images/sk_walkthrough_image8.png" alt="Using the Glean Dictionary search bar" title="Using the Glean Dictionary search bar" /></p>
<p>From here we can select a metric, such as “urlbar.engagement” to see more information about it:</p>
<p><img src="./images/sk_walkthrough_image9.png" alt="Detail view of urlbar.engagement metric" title="Detail view of urlbar.engagement metric" /></p>
<p>Here we can see this metric currently has active sampling configurations in both release and nightly. Let’s say we wish to add one for beta also. Our next step is to click the copy to clipboard button next to “Sampling Configuration Snippet”:</p>
<p><img src="./images/sk_walkthrough_image10.png" alt="Sampling configuration snippet button" title="Sampling configuration snippet button" /></p>
<p>With the snippet copied to the clipboard, we return to Experimenter and our rollout configuration. We can now paste this snippet into the text-box like below:</p>
<p><img src="./images/sk_walkthrough_image11.png" alt="Pasting into the branch configuration text box" title="Pasting into the branch configuration text box" /></p>
<p>That’s all that needs to be done here, if this is the only metric we need to configure. But what if we want to configure more than one? Then it’s back to Glean Dictionary to find the rest of the metrics we are interested in. Let’s say we are also interested in the “exposure” metric.</p>
<p><img src="./images/sk_walkthrough_image12.png" alt="Searching for the urlbar.exposure metric" title="Searching for the urlbar.exposure metric" /></p>
<p>As we select the exposure metric from the list, we can see it isn’t currently being sampled by any experiments or rollouts, and we again find the button to copy the configuration snippet to the clipboard.</p>
<p><img src="./images/sk_walkthrough_image13.png" alt="Back to the sampling configuration snippet button" title="Back to the sampling configuration snippet button" /></p>
<p>Now, we can paste this just below the other snippet inside of Experimenter.</p>
<p><img src="./images/sk_walkthrough_image14.png" alt="Pasting the new metric into Experimenter" title="Pasting the new metric into Experimenter" /></p>
<p>As you can see, the JSON validator isn’t happy and there’s a red squiggle indicating that there’s a problem. We only need a part of the latest pasted snippet, so we copy the ”urlbar.exposure”: true portion of the snippet, and add a comma after the ”urlbar.engagement”: true in the snippet above.</p>
<p><img src="./images/sk_walkthrough_image15.png" alt="The JSON validator isn't happy" title="The JSON validator isn't happy" /></p>
<p>We can then delete the remains of the snippet below, leaving us with a metric configuration with multiple metrics in it. This can be repeated for all the necessary metrics required by the rollout or experiment.</p>
<p><img src="./images/sk_walkthrough_image16.png" alt="Cleaning up the branch payload" title="Cleaning up the branch payload" /></p>
<h4 id="adding-pings-to-the-configuration"><a class="header" href="#adding-pings-to-the-configuration">Adding pings to the configuration</a></h4>
<p>This same procedure can be used to enable and disable pings, also. In order to copy a snippet for a ping, navigate to the “Pings” tab for the application on the Glean Dictionary.</p>
<p><img src="./images/sk_walkthrough_image17.png" alt="Navigate to the Pings tab" title="Navigate to the Pings tab" /></p>
<p>From here, select a ping that is desired to be configured remotely. For instance, the “crash” ping:</p>
<p><img src="./images/sk_walkthrough_image18.png" alt="Selecting the crash ping" title="Selecting the crash ping" /></p>
<p>Just like with the metric, select the button to copy the configuration snippet to your clipboard, then paste it into the Experimenter setup.</p>
<p><img src="./images/sk_walkthrough_image19.png" alt="Adding the ping configuration to the Experimenter setup" title="Adding the ping configuration to the experimenter setup" /></p>
<p>This time we need to get everything for the ”pings_enabled” section, copy and paste it below the ”metrics_enabled” section in the snippet above. We also need to add a comma after the metrics section’s curly brace, like this:</p>
<p><img src="./images/sk_walkthrough_image20.png" alt="Copying the ping config into the right spot" title="Copying the ping config into the right spot" /></p>
<p>Then we can delete the remains of the pasted snippet at the bottom, leaving us with:</p>
<p><img src="./images/sk_walkthrough_image21.png" alt="Cleaning up the ping configuration" title="Cleaning up the ping configuration" /></p>
<h4 id="wrapping-up"><a class="header" href="#wrapping-up">Wrapping up</a></h4>
<p>That should be everything needed to enable the two urlbar metrics, as well as the crash ping. Additional experiment branches can be configured in a similar fashion, or if this is a rollout, it should be ready to launch if the metric configuration is all that is needed.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/mozilla/glean/edit/main/docs/user/user/howto/server-knobs-walkthrough/server-knobs-walkthrough.md">Edit this page on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../user/howto/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../user/howto/real-time-events/real-time-events.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../user/howto/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../user/howto/real-time-events/real-time-events.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../../../shared/tabs.js"></script>
        <script src="../../../../shared/mermaid.min.js"></script>
        <script src="../../../../shared/mermaid-init.js"></script>
        <script src="../../../chart.min.js"></script>
        <script src="../../../chart-distributions.js"></script>
        <script src="../../../chart-distributions-ui.js"></script>


    </div>
    </body>
</html>
